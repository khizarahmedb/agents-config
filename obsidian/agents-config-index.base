filters:
  and:
    - file.inFolder("agents-config")
    - 'file.ext != "png"'
    - 'file.ext != "jpg"'

formulas:
  source_bucket: 'if(file.path.contains("agents-config/templates/"), "templates", if(file.path.contains("agents-config/scripts/"), "scripts", if(file.path.contains("setup_instructions"), "setup", "other")))'
  freshness: 'file.mtime.format("YYYY-MM-DD")'

properties:
  file.path:
    displayName: Path
  file.mtime:
    displayName: Last Modified
  formula.source_bucket:
    displayName: Bucket
  formula.freshness:
    displayName: Updated

views:
  - type: table
    name: Agent Fast Path
    limit: 200
    filters:
      or:
        - 'file.path.contains("agents-config/templates/")'
        - 'file.path.contains("agents-config/scripts/")'
        - 'file.path.contains("agents-config/README.md")'
        - 'file.path.contains("agents-config/AGENTS.md")'
        - 'file.path.contains("agents-config/setup_instructions")'
        - 'file.path.contains("agents-config/obsidian/")'
    order:
      - file.path
      - formula.source_bucket
      - formula.freshness
      - file.mtime

  - type: table
    name: Setup Profiles
    filters:
      or:
        - 'file.path.contains("agents-config/setup_instructions.md")'
        - 'file.path.contains("agents-config/setup_instructions_ubuntu.md")'
        - 'file.path.contains("agents-config/setup_instructions_win.md")'
    order:
      - file.path
      - file.mtime

  - type: table
    name: Automation Scripts
    filters:
      and:
        - 'file.path.contains("agents-config/scripts/")'
        - 'file.ext == "sh" || file.ext == "ps1"'
    order:
      - file.path
      - file.mtime

  - type: table
    name: Obsidian Assets
    filters:
      and:
        - 'file.path.contains("agents-config/obsidian/")'
        - 'file.ext == "md" || file.ext == "base" || file.ext == "canvas"'
    order:
      - file.path
      - file.mtime
